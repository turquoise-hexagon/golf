mapfile a
for i in {0..899};{ c=
for j in {0..3} {5..8} 4
{((e=(i/30+j/3-1)%30,f=(i+j%3-1)%30))
t=$[${a[e<0?29:e]:f<0?29:f:1}]
((t&&j!=4&&c++));};((c-2))&&t=0
((c-3))||t=1;s[i/30]+=$t;}
printf -vo %s\\n ${s[@]}
echo "$o";$0<<<$o